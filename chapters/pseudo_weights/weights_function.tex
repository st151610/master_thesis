On the basis of the pseudo solution we can build pseudo weights.
They are the optimal weights of Problem~\ref{bw:1:primal} if $s_N$ is the global solution. 

We define the (empirical) weights function to be
\begin{align*}
  w\colon
  &
  \left(
  \R^d\times \R^{d\cdot N}
  \right)
  \times
  \left(
  \R^N_{\ge 0}
  \times
  \R
  \times
  \R^{N}
  \right)
  \ 
  \to
  \ 
  \R^N
  \\
  &
  \left(
  (x,x_1,\ldots,x_N),(\rho,\lambda_0,\lambda)
  \right)
  \ 
  \mapsto
  \ 
  \left[
  (\varphi^{'})^{-1}
  \left(
    \rho_i
    +
    \lambda_0
    +
    \inner
    {B(x,x_1,\ldots,x_N)}{\lambda}
  \right)
\right]_{i\in \left\{
  1,\ldots,N
\right\}}
\,.
\end{align*}
Now we define the pseudo weights function
\begin{definition}
  We define the pseudo weights process to be
  \begin{align*}
    w^\dagger
    :=
    w(\cdot,X_1,\ldots,X_N,s_N)
    \qquad
    \text{indexed over}\ 
    x\in\mathcal{X}
    \,.
  \end{align*}
\end{definition}
\begin{lemma}
 It holds
 \begin{enumerate}[label=(\roman*)]
   \item
$w^\dagger(\omega)$ is 
$
\left(
\mathcal{B}(\R^d),\mathcal{B}(\R^N)
\right)
$-measurable 
and contstant on each cell $A_N\in\mathcal{P}_N$ for all $\omega\in\Omega$. 
\item
$w^\dagger(X)$ is 
$
\left(
  \sigma(D_N,X),\mathcal{B}(\R^N)
\right)
$-measurable 
 \end{enumerate}
\end{lemma}
\begin{proof}
  This follows from the (assumed) continuity of 
  $
  (
  \varphi^{'}
  )^{-1}
  $,
  Lemma~\ref{lem:basis_meas} and the measurability of $s_N$ (see Lemma~\ref{lem:pseud_sol}).
\end{proof}


\begin{lemma}
  \label{weights_l_inf}
  It holds 
  \begin{gather*}
    w_i^\dagger(X)
  \ 
  \in
  \ 
  L^\infty(\P)
  \qquad
  \text{for all}
  \ 
  i\in \left\{ 1,\ldots,N \right\}
  \ 
  \text{
    and
  for all 
  }\ 
  N\ge \underline{N}
  \,.
  \end{gather*}
\end{lemma}
\begin{proof}
  It holds
  \begin{gather}
    \label{3967}
    \left| 
     \rho_i 
     +
      \lambda_0
      +
      \inner{B(X,X_1,\ldots,X_N)}{\lambda}
    \right|
    \ 
    \lesssim
    \ 
    \norm{(\rho,\lambda_0,\lambda)}_2
    \qquad
    \text{for all}\ 
    (\rho,\lambda,\lambda_0)
    \in
  \R^N_{\ge 0}
  \times
  \R
  \times
  \R^{N}
    \,.
  \end{gather}
  By Assumption~\ref{asu:objective_f}, $(\varphi^{'})^{-1}$ is non-decreasing and continuous. 
  Since $s_N\in\Theta_N$ and $\Theta_N$ is compact and deterministic, it follows 
  $\norm{s_N}_2 \in L^\infty(\P)$, and
    by \eqref{3967} $w_i^\dagger(X) \in L^\infty (\P)$ for all $i\in \left\{
      1,\ldots,N
    \right\}$ .
\end{proof}
\begin{lemma}
  \label{w.Z=0}
  Let
  $Z\in L^1(\P)$
  be a random variable that is independent of $D_N=(T_i,X_i)_{i\in \left\{
    1,\ldots,N
  \right\}}$ 
  with
  $
\E
\left[
  Z
  \,
  |
  \, 
  X
\right]
= 0
  $
  almost surely.
  It holds
  \begin{gather*}
  \E
  \left[
    w_i^\dagger(X)
  \cdot Z
  \right]
  =0
  \qquad
  \text{for all}
  \ 
  i\in \left\{ 1,\ldots,n \right\}
  \,.
  \end{gather*}
\end{lemma}
\begin{proof}
  We write
  \begin{gather*}
    w_i^\dagger(X)
  \ 
  =
  \ 
  w^\dagger(X)
  \end{gather*}
  and ignore the index $i$.
  By Lemma~\ref{weights_l_inf} and 
  $Z\in L^1(\P)$
  it holds
  \begin{gather}
    \label{9876}
    \norm{
  w^\dagger(X)\cdot Z
    }_{L^1(\P)}
    \ 
  \le
    \ 
  \norm{w^\dagger(X)}_{L^\infty(\P)}
  \norm{Z}_{L^1(\P)}
  \ 
  <
  \ 
  \infty
  \,.
  \end{gather}
  By 
  \eqref{9876},
  $Z\perp D_N$
  and
  $
\E
\left[
  Z
  \,
  |
  \, 
  X
\right]
= 0
  $
  almost surely
  it holds 
  \begin{align*}
    \E
  \left[
  w^\dagger(X)
  \cdot
  Z
  \,
  |
  \,
  D_N,X
  \right]
  &
  \ 
  =
  \ 
  w^\dagger(X)
  \cdot
  \E
  \left[
  Z
  \,
  |
  \,
  D_N,X
  \right]
  \\
  &
  \ 
  =
  \ 
  w^\dagger(X)
  \cdot
  \E
  \left[
  Z
  \,
  |
  \,
  X
  \right]
  \
  =
  \ 
  0
  \qquad
  \text{almost surely.}
  \end{align*}
  Note, that $w^\dagger(X)$ is 
  $
  \left(
  \sigma(D_N,X),\mathcal{B}(\R)
  \right)
  $-measurable.  
  Thus
  \begin{gather*}
    \E
    \left[
  w^\dagger(X)
  \cdot
  Z
  \,
    \right]
    \ 
    =
    \ 
    \E
    \left[
 \E
  \left[
  w^\dagger(X)
  \cdot
  Z
  \,
  |
  \,
  D_N,X
  \right]
    \right]
    \ 
    =
    \ 
    0
    \,.
     \end{gather*}
\end{proof}

\begin{lemma}
  For all continuous functions $f\colon \R^d\to \R$ it holds
 \begin{align}
   \begin{split}
   &
   \left|
  \sum_{k=1}^{N}
    B_k(X,X_1,\ldots,X_N)\cdot 
    f(X_k)
    -
    f(X)
   \right|
   \ 
   \le
   \ 
   \omega
   \left(
    f,h_N^d
   \right)
   \,,
   \end{split}
 \end{align}
 where $\omega(f,\cdot)$ is the modulus of continuity of $f$. 

\end{lemma}

\begin{proof}
  \begin{align}
   \begin{split}
   &
   \left|
  \sum_{k=1}^{N}
    B_k(X_i,X_1,\ldots,X_N)\cdot 
    f(X_k)
    -
    f(X_i)
   \right|
   \\
   &
   \ 
   \le
   \ 
  \sum_{k=1}^{N}
    B_k(X_i,X_1,\ldots,X_N)
    \mathbf{1}\left\{
      X_k\in A_N(X_i)
    \right\}
    \left|
    f(X_k)
    -
    f(X_i)
    \right|
   \\
   &
   \ 
   \le
   \ 
   \omega
   \left(
    f,h_N^d
   \right)
   \,,
   \end{split}
 \end{align}

\end{proof}

\begin{lemma}
  \begin{enumerate}[label=(\roman*)]
    \item
      $\norm{B(X,X_1,\ldots,X_N)}_2\lesssim 1$ 
      \item
      $
      \sum_{i=1}^{N}
        B_k(X,X_1,\ldots,X_N)
        =1
      $
      for all $i\in \left\{
        1,\ldots,N
      \right\}$
      \item
      \begin{align*}
        \frac
        {1}
        {N}
        \sum_{i,k=1}^{N}
            \left|
        B_k(X_i,X_1,\ldots,X_N)
        \cdot
            \varphi
            \left(
              \frac
              {1}
              {\pi(X_k)}
            \right)
            \ 
            -
            \ 
            \varphi
            \left(
              \frac
              {1}
              {\pi(X_i)}
            \right)
            \right|
            \ 
            \to
            \ 
            0
            \qquad
            \text{for}
            \ 
            N\to\infty
          \end{align*}
\item
      \begin{align*}
        \frac
        {1}
        {\sqrt{N}}
        \sum_{i,k=1}^{N}
        \sup_{z\in\R}
            \left|
        B_k(X,X_1,\ldots,X_N)
        \cdot
        F_{Y(1)}(z|X_k)
            \ 
            -
            \ 
        F_{Y(1)}(z|X_i)
            \right|
            \ 
            \to
            \ 
            0
            \qquad
            \text{for}
            \ 
            N\to\infty
      \end{align*}
\end{enumerate}
\end{lemma}
\begin{proof}
If at least one 
$
B_k(X,X_1,\ldots,X_N)
>
0
$, the basis functions sum to 1. If $B_k(X,X_1,\ldots,X_N)=0$ for all basis functions, the sum is 0.
Thus
\begin{align}
  \label{8882}
  &
  \sum_{k=1}^{N}
B_k(X,X_1,\ldots,X_N)
  \ 
  \in
  \ 
  \left\{ 0,1 \right\}
  \notag
  \intertext{
Since $B_i(X_i,X_1,\ldots,X_N)>0$, it holds
  }
  &
  \sum_{k=1}^{N}
  B_k(X_i)
  \ 
  =
 \  
  1
  \qquad
  \text{for all}\ 
  i\in
  \left\{ 1,\ldots,N \right\}
  \,.
\end{align}
We prove \textit{(i)}.
Since 
\begin{gather*}
B_k(X,X_1,\ldots,X_N)
\ 
\in
\ 
[0,1]
\qquad
\text{for all}\ 
k\in \left\{ 1,\ldots,N \right\}
\,,
\end{gather*}
it holds
\begin{gather*}
  \label{basis_l2_bdd}
  \norm{
B(X,X_1,\ldots,X_N)
}_2^2
  \ 
  =
  \ 
  \sum_{k=1}^{N} 
B(X,X_1,\ldots,X_N)
  ^2
  \ 
  \le
  \ 
  \sum_{k=1}^{N} 
B(X,X_1,\ldots,X_N)
  \ 
  \in
  \ 
  \left\{ 0,1 \right\}
\,.
\end{gather*}

 Note, that for all continuous functions $f\colon \R^d\to \R$ it holds
 \begin{align}
   \begin{split}
   &
   \left|
  \sum_{k=1}^{N}
    B_k(X_i,X_1,\ldots,X_N)\cdot 
    f(X_k)
    -
    f(X_i)
   \right|
   \\
   &
   \ 
   \le
   \ 
  \sum_{k=1}^{N}
    B_k(X_i,X_1,\ldots,X_N)
    \mathbf{1}\left\{
      X_k\in A_N(X_i)
    \right\}
    \left|
    f(X_k)
    -
    f(X_i)
    \right|
   \\
   &
   \ 
   \le
   \ 
   \omega
   \left(
    f,h_N^d
   \right)
   \,,
   \end{split}
 \end{align}
 where $\omega(f,\cdot)$ is the modulus of continuity of $f$. 
 Thus
      \begin{align*}
        \frac
        {1}
        {N}
        \sum_{i,k=1}^{N}
            \left|
        B_k(X,X_1,\ldots,X_N)
        \cdot
            \varphi^{'}
            \left(
              \frac
              {1}
              {\pi(X_k)}
            \right)
            \ 
            -
            \ 
            \varphi^{'}
            \left(
              \frac
              {1}
              {\pi(X_i)}
            \right)
            \right|
            \ 
            \le
            \ 
   \omega
   \left(
     \varphi^{'},h_N^d
   \right)
            \ 
            \to
            \ 
            0
          \end{align*}
          for $N\to\infty$.
          In the same way it follows
      \begin{align*}
            &
        \frac
        {1}
        {\sqrt{N}}
        \sum_{i,k=1}^{N}
        \sup_{z\in\R}
            \left|
        B_k(X,X_1,\ldots,X_N)
        \cdot
        F_{Y(1)}(z|X_k)
            \ 
            -
            \ 
        F_{Y(1)}(z|X_i)
            \right|
            \\
            &
            \ 
            \le
            \ 
            \sqrt{N}
            \sup_{z\in\R}
            \omega
            \left(
        F_{Y(1)}(z|\cdot)
        ,
        h_N^d
            \right)
            \ 
            \to
            \ 
            0
            \qquad
            \text{for}
            \ 
            N\to\infty
            \,.
      \end{align*}
\end{proof}
