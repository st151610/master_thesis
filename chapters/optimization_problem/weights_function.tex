Theorem~\ref{dual_solution_th} tells us that if an optimal solution
$
(\rho^\dagger,\lambda_0^\dagger,\lambda^\dagger)
$
to Problem~\ref{dual} exists,
then the unique optimal solutions to Problem~\ref{bw:1:primal} are 
\begin{gather*}
  w^\dagger_i
  \ 
  :=
  \ 
  (
  \varphi^{'}
  )^{-1}
  \left(
    \rho^\dagger_i
  \ 
    +
  \ 
\lambda_0^\dagger
  \ 
+
  \ 
\inner
{B(X_i)}
{
\lambda^{\dagger}
}
  \right)
  \qquad
  \text{for all}\ 
  i\in
  \left\{ 1,\ldots,n \right\}
  \,.
\end{gather*}

This point of view is sufficient from a practical point of view
(when we are interested in actually computing the optimal weights).

For the subsequent analysis we need to view the weights as random quantities. To this end, we shall introduce the weights process. 

\begin{definition}
  \label{def:weights_function}
  We define the weights process to be a stochastic process indexed 
  over
  $
  \mathcal{X}
  \,
  \times
  \,
  \R^N_{\ge 0}
  \,
  \times
  \,
  \R
  \times
  \,
  \R^{N}
  $
  with values in $\R^N$ such that
\begin{align*}
  w
  \left( 
  x
  ,
  \rho
  ,
  \lambda_0
  ,
  \lambda
  \right)
  \ 
  :=
  \ 
  \left[ 
    (
    \varphi^{'}
    )^{-1}
    \left( 
     \rho_i 
     +
      \lambda_0
      +
      \inner{B(x)}{\lambda}
    \right)
  \right]_{i\in \left\{ 1, \ldots,N \right\}}
    \,.
\end{align*}
\end{definition}
By the measurability of the basis functions (or the basis processes),
the weights processes is also measurable 
(the quantities 
$
  w
  \left( 
  x
  ,
  \rho
  ,
  \lambda_0
  ,
  \lambda
  \right)
$
are random variables).
The next question is if there are (plausible) assumptions such that the weights processes at a random parameter
$
(\rho^\dagger,\lambda_0^\dagger,\lambda^\dagger)
$
is measurable.
To answer this in a good way we need the argmax measurability theorem \cite[Theorem~18.19]{Aliprantis2007}.
\subsection{Argmax Measurability Theorem}
\input{chapters/consistency_weights/meas_argmax.tex}

\begin{lemma}
  \label{weights_l_inf}
  Let Assumption~\ref{asu:existence_sol}, 
  Assumption~\ref{asu:basis},
  and Assumption~\ref{asu:objective_f} hold true.
  Then it holds 
  \begin{gather*}
    w_i^\dagger(X)
  \ 
  \in
  \ 
  L^\infty(\P)
  \qquad
  \text{for all}
  \ 
  i\in \left\{ 1,\ldots,N \right\}
  \ 
  \text{
    and
  for all 
  }\ 
  N\ge \underline{N}
  \,.
  \end{gather*}
\end{lemma}
\begin{proof}
  Let $N\ge \underline{N}$.
  By Assumption~\ref{asu:basis} it holds 
  $
    \text{for all}\ 
  $ 
  \begin{gather}
    \label{3967}
    \left| 
     \rho_i 
     +
      \lambda_0
      +
      \inner{B(x)}{\lambda}
    \right|
    \ 
    \lesssim
    \ 
    \norm{(\rho,\lambda_0,\lambda)}_2
    \,.
  \end{gather}
  $
    \text{for all}
    \ 
    x\in\mathcal{X}
    \
    \text{and for all}\ 
    (\rho,\lambda,\lambda_0)
    \in
  \R^N_{\ge 0}
  \times
  \R
  \times
  \R^{N}
  $.
  By Assumption~\ref{asu:existence_sol}, 
  there exists a (compact) parameter space
  $\Theta_N$ around the origin, with $\mathrm{diam}\,  \Theta_N<\infty$, 
  such that for all data sets $D_N$ it holds  $(\rho^\dagger,\lambda^\dagger,\lambda_0^\dagger)\in\Theta_N$.
  By Assumption~\ref{asu:objective_f}, $(\varphi^{'})^{-1}$ is non-decreasing and continuous. Thus
    by \eqref{3967} it holds
  \begin{align*}
    \left| 
    w_i^\dagger(x)
    \right|
    \ 
    \lesssim
    \ 
    \left| 
    (\varphi^{'})^{-1}
    \left( 
      \,
      -
    \norm{(\rho^\dagger,\lambda_0^\dagger,\lambda^\dagger)}_2
    \right)
    \right|
    \ 
    +
    \ 
    \left| 
    (\varphi^{'})^{-1}
    \left( 
      \,
    \norm{(\rho^\dagger,\lambda_0^\dagger,\lambda^\dagger)}_2
    \right)
    \right|
    \ 
    \ 
    <
    \ 
    \infty
  \end{align*}
  for all $x\in\mathcal{X}$
  and all $i\in \left\{ 1,\ldots,n \right\}$
  .
\end{proof}
\begin{lemma}
  \label{w.Z=0}
  Let Assumption~\ref{aa:assumption:2} and Assumption~\ref{aa:assumption:3} hold true.
  Furthermore, 
  let
  $N\ge\underline{N}$, and
  let
  $Z\in L^1(\P)$
  be a random variable that is independent of $D_N$ 
  with
  $
\E
\left[
  Z
  \,
  |
  \, 
  X
\right]
= 0
  $
  almost surely.
  It holds
  \begin{gather*}
  \E
  \left[
  w_i(X,\rho^\dagger,\lambda^\dagger,\lambda_0^\dagger)
  \cdot Z
  \right]
  =0
  \qquad
  \text{for all}
  \ 
  i\in \left\{ 1,\ldots,n \right\}
  \,.
  \end{gather*}
\end{lemma}
\begin{proof}
  Let
  $N\ge\underline{N}$.
  We write
  \begin{gather*}
  w_i(X,\rho^\dagger,\lambda^\dagger,\lambda_0^\dagger)
  \ 
  =
  \ 
  w^\dagger(X)
  \end{gather*}
  and ignore the index $i$.
  By Lemma~\ref{weights_l_inf} and 
  $Z\in L^1(\P)$
  it holds
  \begin{gather}
    \label{9876}
    \norm{
  w^\dagger(X)\cdot Z
    }_{L^1(\P)}
    \ 
  \le
    \ 
  \norm{w^\dagger(X)}_{L^\infty(\P)}
  \norm{Z}_{L^1(\P)}
  \ 
  <
  \ 
  \infty
  \,.
  \end{gather}
  By 
  \eqref{9876},
  $Z\perp D_N$
  and
  $
\E
\left[
  Z
  \,
  |
  \, 
  X
\right]
= 0
  $
  almost surely
  it holds 
  \begin{align*}
    \E
  \left[
  w^\dagger(X)
  \cdot
  Z
  \,
  |
  \,
  D_N,X
  \right]
  &
  \ 
  =
  \ 
  w^\dagger(X)
  \cdot
  \E
  \left[
  Z
  \,
  |
  \,
  D_N,X
  \right]
  \\
  &
  \ 
  =
  \ 
  w^\dagger(X)
  \cdot
  \E
  \left[
  Z
  \,
  |
  \,
  X
  \right]
  \
  =
  \ 
  0
  \qquad
  \text{almost surely.}
  \end{align*}
  Thus
  \begin{gather*}
    \E
    \left[
  w^\dagger(X)
  \cdot
  Z
  \,
    \right]
    \ 
    =
    \ 
    \E
    \left[
 \E
  \left[
  w^\dagger(X)
  \cdot
  Z
  \,
  |
  \,
  D_N,X
  \right]
    \right]
    \ 
    =
    \ 
    0
    \,.
     \end{gather*}
\end{proof}

